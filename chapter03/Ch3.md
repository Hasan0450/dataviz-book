**Chapter 3**

All the R code is in [Ch3.R](Ch3.R).

Figure 3.1's strip chart or dot plot was generated with the R function `stripchart()`. I wrapped that in a function `drawstripchart()` so that parameters would only need to be specified in one place, making sure that SVG and PNG version match. The SVG file is [here](3-stripchart-dotplot.svg).

The histograms in Figure 3.2 were generated separately for [10 bins](3-histogram-10.svg), [20 bins](3-histogram-20.svg), and [50 bins](3-histogram-50.svg), combined in Inkscape (the SVG file is [here](3-histogram.svg)), and the common titles lined up there.

The kernel density plots in Figures 3.3 and 3.4 use standard base R functions, with default Gaussian kernels and bandwidth set to the all-round recommended SJ option. The SVG files are [here](3-kernel.svg) and [here](3-kernel-log.svg).

Figure 3.5 was combined in Inkscape from three plots generated by `ggplot2::ggplot()`. The plot with two histograms used `geom_histogram` and facets by city. The plot with superimposed kernel densities used `geom_density` with color set by city. The heatmap used `geom_tile` and encoded city to the vertical axis. These reflect three different ways of practically comparing two groups in your data within `ggplot2`. There are SVG files for the [histogram](3-compare-histo.svg), the [kernel density](3-compare-kernel.svg), and the [heatmap](3-compare-heatmap.svg), as well as the [combined final version](3-compare.svg).

Figure 3.6 is a straightforward violin plot; the SVG file is [here](3-violin.svg).

Figure 3.8 is composed of four individual line charts with a particular quartile highlighted each time. The vertical bars in grey and red are added manually in Inkscape and the plots put together into one image; the SVG file is [here](3-small-change.svg), and the individual plots are named 3-small-change-...This is an example of the sort of composite dataviz that you could either create in one pass from complex code, or put together simpler plots with some manual editing. Often, the choice is driven by whether you are likely to use the code again with new data -- which would argue for complex code without manual intervention.

Figure 3.9 is the sort of composite plot where functions have already been written to make their creation simple for you (I used `ggscatterhist()`). The SVG file is [here](3-iris-marginal.svg).

Similarly, 3.10 comprises a hexagonal bin plot and a contour plot, both of which can be obtained quite simply in R. There are SVG files for the [hexbin](3-iris-hexbin.svg), the [contour](3-iris-contour.svg), and the [combined image](3-iris-hexbin-contour.svg).

Figures 3.11 and 3.12 are simple base R plots, except that the right part of Figure 3.12 is actually faked (R does not, except perhaps in foolish user-written packages, permit axis-breaking) by plotting the last point at y=26, then adding the pair of diagonal break lines and changing the label values below them on the y-axis manually in Inkscape. There are SVG files for [Figure 3.11](3-abuse1.svg) and [Figure 3.12](3-abuse2.svg).

Figure 3.7 was not made by me, but by Henrik Lindberg, who does a lot of other [cool dataviz stuff](https://github.com/halhen/viz-pub). There have been many charts along these lines, most famously the album cover mentioned in the caption, but this one got a lot of attention when I was writing the book, is nicely designed, revived the format, and is quite accessible and interesting in itself.
